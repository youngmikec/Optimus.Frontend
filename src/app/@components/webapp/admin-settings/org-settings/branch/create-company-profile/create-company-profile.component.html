<mat-dialog-content>
  <section id="manage-contact-category">
    <div class="manage-contact-category-header">
      <div>
        <h6 class="opt-para-2 fw-700 mb-0">
          <ng-container *ngIf="data?.instance !== 'update'">
            Create Company Profile
          </ng-container>
          <ng-container *ngIf="data?.instance === 'update'"
            >Edit Company Profile</ng-container
          >
        </h6>
      </div>

      <div matRipple class="close-icon-container" (click)="closeDialog()">
        <img src="/assets/icons/modal-close-icon.svg" alt="modal close icon" />
      </div>
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
      <div class="profile-section">
        <div class="profile-picture-section">
          <div class="profile-picture-container">
            <img
              [src]="logoPreview"
              (click)="logoUpload.click()"
              alt="No Logo"
            />
          </div>

          <input
            #logoUpload
            type="file"
            accept="image/*"
            name=""
            class="d-none"
            (change)="onUploadLogo($event)"
          />
        </div>

        <div class="profile-name-container" (click)="logoUpload.click()">
          <svg
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3.94332 12.8333H10.0567C11.6667 12.8333 12.3083 11.8475 12.3842 10.6458L12.6875 5.82749C12.7692 4.56749 11.7658 3.49999 10.5 3.49999C10.1442 3.49999 9.81749 3.29582 9.65415 2.98082L9.23415 2.13499C8.96582 1.60416 8.26582 1.16666 7.67082 1.16666H6.33499C5.73415 1.16666 5.03415 1.60416 4.76582 2.13499L4.34582 2.98082C4.18249 3.29582 3.85582 3.49999 3.49999 3.49999C2.23415 3.49999 1.23082 4.56749 1.31249 5.82749L1.61582 10.6458C1.68582 11.8475 2.33332 12.8333 3.94332 12.8333Z"
              stroke="#1D1D1D"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M6.125 4.66666H7.875"
              stroke="#1D1D1D"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M6.99999 10.5C8.04416 10.5 8.89582 9.64834 8.89582 8.60418C8.89582 7.56001 8.04416 6.70834 6.99999 6.70834C5.95582 6.70834 5.10416 7.56001 5.10416 8.60418C5.10416 9.64834 5.95582 10.5 6.99999 10.5Z"
              stroke="#1D1D1D"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <p class="opt-caption mb-0">Upload image</p>
        </div>
      </div>

      <label class="input-label">Head Office Address</label>
      <div class="input-style1 gap-2 flex-inputs mb-3">
        <div class="inputs-items">
          <mat-form-field appearance="outline" [style.width.rem]="10">
            <mat-select formControlName="country" placeholder="Country">
              <ng-container *ngFor="let country of allCountryCodes">
                <mat-option [value]="country.name">
                  {{ country.name }}
                </mat-option>
              </ng-container>
            </mat-select>
            <mat-error *ngIf="profileFormControls['country'].invalid">
              <img
                src="/assets/icons/error.svg"
                alt=""
                class="img-fluid error-icon"
              />
              {{ getErrorMessage('country') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="inputs-items">
          <mat-form-field appearance="outline" [style.width.rem]="10">
            <input matInput placeholder="State" formControlName="state" />
            <mat-error *ngIf="profileFormControls['state'].invalid">
              <img
                src="/assets/icons/error.svg"
                alt=""
                class="img-fluid error-icon"
              />
              {{ getErrorMessage('state') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="input-style1 gap-2 flex-inputs mb-2">
        <div class="inputs-items">
          <mat-form-field appearance="outline" [style.width.rem]="10">
            <input matInput placeholder="Area" formControlName="area" />
            <mat-error *ngIf="profileFormControls['area'].invalid">
              <img
                src="/assets/icons/error.svg"
                alt=""
                class="img-fluid error-icon"
              />
              {{ getErrorMessage('area') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="inputs-items">
          <mat-form-field appearance="outline" [style.width.rem]="10">
            <input
              matInput
              type="text"
              placeholder="Street "
              formControlName="streetName"
            />
            <mat-error *ngIf="profileFormControls['streetName'].invalid">
              <img
                src="/assets/icons/error.svg"
                alt=""
                class="img-fluid error-icon"
              />
              {{ getErrorMessage('streetName') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="input-style1 gap-2 flex-inputs mb-2">
        <div class="inputs-items">
          <mat-form-field appearance="outline" [style.width.rem]="10">
            <input
              matInput
              type="text"
              placeholder="Building"
              formControlName="building"
            />
            <mat-error *ngIf="profileFormControls['building'].invalid">
              <img
                src="/assets/icons/error.svg"
                alt=""
                class="img-fluid error-icon"
              />
              {{ getErrorMessage('building') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="inputs-items">
          <mat-form-field appearance="outline" [style.width.rem]="10">
            <input
              matInput
              type="text"
              placeholder="Zip Code"
              formControlName="zipCode"
            />
            <mat-error *ngIf="profileFormControls['zipCode'].invalid">
              <img
                src="/assets/icons/error.svg"
                alt=""
                class="img-fluid error-icon"
              />
              {{ getErrorMessage('zipCode') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="input-style1">
        <label class="input-label">Website</label>

        <mat-form-field appearance="outline" [style.width.%]="100">
          <input
            type="text"
            matInput
            formControlName="website"
            placeholder="Enter website address"
          />

          <mat-error *ngIf="profileFormControls['website'].invalid">
            <img
              src="/assets/icons/error.svg"
              alt=""
              class="img-fluid error-icon"
            />
            {{ getErrorMessage('website') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="input-style1">
        <label class="input-label">Email Address</label>
        <mat-form-field appearance="outline" [style.width.%]="100">
          <input
            matInput
            type="text"
            placeholder="Enter email address"
            formControlName="email"
          />
          <mat-error *ngIf="profileFormControls['email'].invalid">
            <img
              src="/assets/icons/error.svg"
              alt=""
              class="img-fluid error-icon"
            />
            {{ getErrorMessage('email') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="input-style1">
        <label class="input-label">Contact Number</label>

        <div class="select-input-style">
          <mat-form-field
            appearance="outline"
            [style.width.%]="100"
            class="select-field"
          >
            <input
              #countryCode
              type="text"
              matInput
              placeholder="234"
              formControlName="countryCode"
              [matAutocomplete]="forCountryCode"
              (input)="onFilterCountryCode(countryCode.value)"
            />

            <mat-autocomplete
              class="country-code"
              autoActiveFirstOption
              #forCountryCode="matAutocomplete"
            >
              <ng-container
                *ngIf="
                  (allFilteredCountryCodes | async) !== null;
                  else noCountryCodes
                "
              >
                <mat-option
                  *ngFor="let countryCode of allFilteredCountryCodes | async"
                  class="country-code"
                  value="{{ countryCode.dialCode }}"
                >
                  <div class="country-code-container">
                    <!-- <img [src]="countryCode.flag" alt="" class="flag" /> -->

                    <p class="country">{{ countryCode.name }} <span></span></p>

                    <p class="code">({{ countryCode.dialCode }})</p>
                  </div>
                </mat-option>
              </ng-container>

              <ng-template #noCountryCodes>
                <mat-option disabled>Loading Country Codes...</mat-option>
              </ng-template>
            </mat-autocomplete>
          </mat-form-field>
          <mat-form-field appearance="outline" [style.width.%]="100">
            <!-- <mat-select matPrefix formControlName="countryCode">
              <ng-container *ngFor="let countryCode of allCountryCodes">
                <mat-option class="country-code" [value]="countryCode.dialCode">
                  <div class="country-code-container">
                    <img [src]="countryCode.flag" class="flag" />
                    <p class="code">{{ countryCode.dialCode }}</p>
                  </div>
                </mat-option>
              </ng-container>
            </mat-select> -->
            <input
              matInput
              type="tel"
              placeholder="123456"
              formControlName="phoneNumber"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="cta-container">
        <button
          matRipple
          type="button"
          class="btn opt-btn-primary-outline"
          (click)="closeDialog()"
        >
          Cancel
        </button>

        <button
          matRipple
          class="btn opt-btn-primary"
          [disabled]="profileForm.invalid || (isLoading | async) !== false"
        >
          <ng-container *ngIf="data.instance === 'update'"
            >Save Changes</ng-container
          >
          <ng-container *ngIf="data.instance === 'create'">Create</ng-container>
          <ng-container *ngIf="(isLoading | async) !== false">
            <app-button-loader></app-button-loader>
          </ng-container>
        </button>
      </div>
    </form>
  </section>
</mat-dialog-content>
